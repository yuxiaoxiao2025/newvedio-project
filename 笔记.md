1. Populate your project context:
   "Please read openspec/project.md and help me fill it out
    with details about my project, tech stack, and conventions"

2. Create your first change proposal:
   "I want to add [针对视频处理项目，现需使用“E:\trae\newvedio-project\qwen3-VL-视频理解API.md”模型对"用户视频"和"景区视频"两种类型的视频文件执行以下分析任务：

1. 视频内容分析报告生成：为每个输入视频生成详细的结构化分析报告，内容应包含但不限于：视频时长、关键帧识别、场景分类、物体检测、动作识别、情感基调分析、色彩分布统计及画面质量评估等维度。

2. 视频融合方案设计：基于指定的两个视频文件，提供完整的视频融合建议报告。该报告需包含：30-50秒目标视频的最优分段策略（精确到秒级）、关键画面裁剪建议、转场效果选择（需提供3种以上可选方案）、音频处理建议、画面融合技术参数及整体叙事逻辑说明，并附时间轴可视化图表。

3. 背景音乐生成提示词文档：根据视频融合建议报告，编写用于大模型生成背景音乐的详细提示词文档。文档应包含：音乐风格定位、情感曲线设计、节奏与视频画面匹配方案、乐器选择建议、时长控制参数及关键转场处的音乐变化指示等内容，确保生成的背景音乐能精准匹配融合视频的叙事节奏与情感表达需求。注意，我们只是需要提示词，关于如何实现音乐不需要考虑。

4. 开发过程中应优先考虑功能实现，采用简洁直接的技术方案，避免过度设计和不必要的复杂功能

所有分析结果需以可编辑格式交付，并附详细的分析方法说明与结果可信度评估。]. Please create an
    OpenSpec change proposal for this feature"

3. Learn the OpenSpec workflow:
   "Please explain the OpenSpec workflow from openspec/AGENTS.md
    and how I should work with you on this project"
	
	
	
	
	我需要你用心做一个“网络抓取智慧体”的提示词，通过Chrome 工具对网址进行访问。然后需要遍历文档导航并访问所有子页面，并把网页上的内容生成一个完整的md格式的文档。文档必须是中文的
	
	我需要对项目需求进行以下更正和明确：
1. 开发过程中应优先考虑功能实现，采用简洁直接的技术方案，避免过度设计和不必要的复杂功能
2. 视频分析功能需明确使用qwen3的VL模型作为核心大模型，确保模型选型和集成路径清晰
3. 音乐模型相关的所有功能、设计和实现计划必须从项目中完全移除，不得保留任何相关内容，避免对开发人员造成误导或混淆


我需要补充以下几点关于项目执行的关键问题和建议：

1. 经实践验证，单独使用VL模型处理最终的2个报告生成任务以及背景音乐提示词创作任务时，面临较大难度，无法达到预期质量标准。

2. 基于上述问题，我建议引入Qwen3同系列的文本模型"qwen-plus"来协同完成相关工作，以提升文本生成的准确性和丰富度。

3. 在实施过程中，请参考以下文档资源：
   - 提示词设计指南："E:\\trae\\newvedio-project\\qwen3-prompt.md"
   - API调用规范："E:\\trae\\newvedio-project\\qwen_api.md"
   - 视频内容理解模块："E:\\trae\\newvedio-project\\qwen3-VL-视频理解API.md"

明确模型调用流程、数据交互方式以及质量验收标准。


重新执行全面的测试工作，严格按照以下要求进行：

1. 测试范围必须包含：
   - 单元测试（覆盖所有核心组件和功能）
   - 集成测试（验证模块间交互）
   - E2E测试（完整用户流程验证）

2. 测试方法要求：
   - 禁止使用任何"simple"或"quick"等简化测试方式
   - 必须编写详细的测试用例，覆盖正常流程和异常情况
   - 每个测试用例都要有明确的断言和预期结果

3. 问题处理流程：
   - 遇到问题时立即使用${vue_cn}、${qwen}、${vite}这三个技能进行诊断
   - 记录完整的错误日志和重现步骤
   - 必须修复所有发现的问题后才能结束测试

4. 质量保证：
   - 测试覆盖率必须达到95%以上
   - 所有测试用例必须通过
   - 提交完整的测试报告，包含测试结果、问题列表和修复方案

5. 执行标准：
   - 每个测试阶段都要进行代码审查
   - 测试环境必须与生产环境一致
   - 严格执行回归测试


   针对AIService类的analyzeVideoContent()方法进行单元测试，需要明确以下测试要求和实施步骤：

1. 测试文件编写要求：
- 使用express4x技能搭建测试框架
- 使用vite技能配置测试环境
- 采用artifacts-builder技能生成测试报告可视化界面

2. 被测试文件校验要求：
- 检查AIService类文件是否存在
- 验证analyzeVideoContent()方法是否正确定义
- 确认方法参数和返回值类型符合预期

3. 具体测试内容：
- 正常视频分析场景：用真实视频测试API能否正确返回分析结果
- API调用失败处理：模拟网络中断，检查错误处理是否合理
- 无效视频路径处理：传入错误路径，验证能否正确报错
- 返回数据格式验证：检查返回的JSON数据结构是否符合文档要求

4. 最终测试结果说明（大白话版）：
- 测试了视频分析功能在各种情况下的表现
- 确保了好视频能分析、坏视频会报错、断网能处理
- 验证了返回的数据格式都是标准统一的
- 目的是保证这个视频分析功能在实际使用中稳定可靠

 如果要完成真正的单元测试（5.1），需要创建测试文件来覆盖以下场景：

  应该测试的场景：

  AIService 类核心功能：
  1. analyzeVideoContent() 方法测试
    - 正常视频分析场景
    - API调用失败处理
    - 无效视频路径处理
    - 返回数据格式验证
  2. generateVideoReport() 方法测试
    - 内容分析报告生成（content类型）
    - 融合分析报告生成（fusion类型）
    - 音乐提示词生成（music类型）
    - 无效报告类型处理
  3. analyzeVideoThreeStage() 方法测试
    - 完整三阶段流程测试
    - 阶段间数据传递验证
    - 错误传播机制
  4. callWithRetry() 重试机制测试
    - 网络错误重试逻辑
    - 最大重试次数限制
    - 指数退避延迟验证
<!--
Sync Impact Report:
Version change: 1.0.0 → 1.1.0 (practical implementation alignment)
Modified principles:
  - Principle V: 安全与隐私保护 (简化为实用性安全要求)
  - Added: Principle VI: 实用技术栈与工具
  - Added: Principle VII: 结构化调试与问题解决
Added sections:
  - Practical Technology Stack & Tools principle
  - Structured Debugging & Problem Solving principle
  - Technical Implementation Requirements section
Removed sections: N/A
Templates requiring updates:
  ✅ .specify/templates/plan-template.md (Constitution Check section aligned)
  ✅ .specify/templates/spec-template.md (User Stories align with Mobile-First principle)
  ✅ .specify/templates/tasks-template.md (Testing aligns with Quality Assurance principle)
Follow-up TODOs: None
-->

# 视频上传H5项目 Constitution

## Core Principles

### I. 移动优先设计
H5项目必须以移动端体验为核心设计原则。界面必须在各种移动设备上提供一致的用户体验，优先考虑触摸交互、响应式设计和移动端性能优化。所有功能必须在小屏幕设备上完全可用，确保跨设备兼容性和可访问性。

### II. 实用性视频处理
视频上传和处理必须采用实用性方法，支持大文件(300MB)上传、实时进度反馈和基础错误处理。确保文件上传可靠性，避免网络中断导致的数据丢失。注重用户体验的实用功能而非过度工程化。

### III. 用户体验至上
所有功能设计必须以用户体验为首要考虑。界面必须简洁直观，提供清晰的操作反馈和错误提示。加载状态、进度指示和错误处理必须用户友好。确保用户在任何网络条件下都能获得可预测的使用体验。

### IV. 实用性能与可扩展性
系统必须设计为实用性能和可扩展架构。使用成熟稳定的技术栈，支持合理的并发处理。监控和日志系统必须具备实用性，便于问题排查和性能优化。避免过度复杂的架构设计。

### V. 实用安全与隐私保护
用户数据安全是基本要求。实现基础的文件验证、错误处理和访问控制。采用实用性安全措施，避免过度工程化的企业级安全方案。确保基本的用户数据保护和系统安全。

### VI. 实用技术栈与工具
项目必须采用成熟稳定的技术栈和工具。前端固定端口配置(3005)，后端固定端口配置(8005)，使用cnpm命令管理依赖。采用Chrome DevTools MCP进行可视化测试，确保开发流程的实用性和一致性。

### VII. 结构化调试与问题解决
遇到错误时必须采用结构化调试方法：逐一注释代码块，通过排除法定位错误源头。优先使用直观的测试工具和方法，确保问题解决的效率和准确性。建立清晰的日志系统(用户日志+开发日志)辅助调试。

## Technical Constraints

### 技术栈要求
- **前端框架**: 必须使用Vue.js 3 + Composition API，成熟稳定的技术选择
- **后端框架**: 必须使用Node.js + Express.js，成熟稳定的后端技术
- **存储**: 本地文件系统分类存储(/upload/personal/, /upload/scenic/)
- **网络**: HTTP/2和WebSocket实时通信支持
- **兼容性**: 必须支持iOS Safari、Android Chrome和主流移动浏览器
- **端口配置**: 前端固定端口3005，后端固定端口8005，禁止动态分配

### 实用性能标准
- **首次加载时间**: 移动网络下不超过3秒
- **文件上传**: 支持最大300MB文件，最多3个文件
- **响应延迟**: 进度更新延迟不超过500毫秒
- **并发处理**: 支持合理的并发用户数
- **依赖管理**: 强制使用cnpm命令安装所有依赖包

### 实用安全要求
- 文件类型验证(mp4/avi格式)
- 文件大小和数量限制(300MB, 3个)
- 基础的错误处理和用户提示
- 端口冲突检查和处理
- 基础的访问控制和日志记录

## Development Workflow

### 实用开发流程
1. **API优先**: 先开发后端API接口，确保前后端可以并行开发
2. **固定环境**: 确保端口配置固定，避免动态分配带来的不确定性
3. **实用测试**: 使用Chrome DevTools MCP进行可视化E2E测试
4. **依赖统一**: 使用cnpm命令确保依赖版本一致性
5. **结构调试**: 遇到错误采用代码注释排除法定位问题

### 实用质量保证
- **基础代码审查**: 确保代码质量和规范一致
- **实用测试**: 单元测试 + Chrome DevTools MCP E2E测试
- **日志系统**: 用户日志 + 开发日志，便于问题排查
- **端口管理**: 测试前检查端口冲突，确保环境稳定
- **错误处理**: 实用的错误提示和恢复机制

### 实用发布标准
- **功能完整**: 核心功能完整实现并测试通过
- **性能达标**: 满足实用性能标准要求
- **基础安全**: 通过基础安全检查
- **文档完善**: 提供必要的用户文档和技术文档
- **环境稳定**: 端口配置和依赖管理稳定可靠

## Technical Implementation Requirements

### 端口配置管理
- **前端端口**: 固定为3005，在配置文件中设置
- **后端端口**: 固定为8005，在配置文件中设置
- **端口检查**: 测试前必须检查端口占用情况
- **冲突解决**: 发现端口占用时必须终止占用进程

### 依赖管理
- **安装方式**: 必须使用cnpm命令安装所有依赖包
- **版本一致性**: 确保团队开发环境的依赖版本一致
- **包管理**: 避免使用npm，优先cnpm提高安装效率和稳定性

### 测试方法论
- **E2E测试**: 使用Chrome DevTools MCP工具进行可视化测试
- **测试资源**: 使用test-videos/目录下的真实视频文件
- **调试方法**: 采用代码注释排除法定位问题
- **测试流程**: 单元测试 + E2E测试，无复杂集成测试

### 调试与日志
- **日志级别**: 用户日志 + 开发日志两个级别
- **调试策略**: 逐一注释代码块的排除法
- **问题定位**: 从错误相关代码区域开始逐步排查
- **日志记录**: 记录关键操作和错误信息

## Governance

本章程是项目的最高指导原则，所有开发活动必须严格遵守。任何对本章程的修改必须经过以下流程：

1. **提案阶段**: 提出修改建议并说明理由
2. **影响评估**: 评估修改对项目的影响范围
3. **团队评审**: 必须获得开发团队的一致同意
4. **文档更新**: 更新相关文档和模板
5. **实施通知**: 向所有相关方传达变更内容

### 合规性检查
- 所有PR和代码审查必须验证对本章程的合规性
- 任何复杂度的增加都必须提供合理的解释和论证
- 端口配置和依赖管理违规必须立即修复
- 定期进行章程合规性审查和改进

### 版本管理
- 本章程采用语义版本控制 (MAJOR.MINOR.PATCH)
- MAJOR版本: 重大治理原则变更或不可兼容的修改
- MINOR版本: 新增原则或重要指导内容扩展
- PATCH版本: 说明澄清、错别字修正、非语义性优化

**版本**: 1.1.0 | **制定日期**: 2025-11-14 | **最后修订**: 2025-11-14
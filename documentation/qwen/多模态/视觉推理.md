---
title: 视觉推理
update: 2025-11-18
source: https://help.aliyun.com/zh/model-studio/visual-reasoning
---

视觉推理模型能够先输出思考过程，再输出回答内容，适用于处理复杂的视觉分析任务，如解读数学题、分析图表数据或复杂视频理解等任务。

## 使用方式

- enable_thinking 控制混合思考模型的思考过程；仅思考模型总会思考且无法关闭。
- 推荐流式输出以避免超时，Python需通过 `extra_body` 传入非标准参数。

## 快速开始（Python / Node.js）

```python
from openai import OpenAI
import os

client = OpenAI(
    api_key = os.getenv("DASHSCOPE_API_KEY"),
    base_url="https://dashscope.aliyuncs.com/compatible-mode/v1"
)

reasoning_content = ""
answer_content = ""
is_answering = False

completion = client.chat.completions.create(
    model="qvq-max",
    messages=[{
        "role": "user",
        "content": [
            {"type": "image_url","image_url": {"url": "https://img.alicdn.com/imgextra/i1/O1CN01gDEY8M1W114Hi3XcN_!!6000000002727-0-tps-1024-406.jpg"}},
            {"type": "text","text": "这道题怎么解答？"}
        ]
    }],
    stream=True
)

for chunk in completion:
    if not chunk.choices:
        print(chunk.usage)
    else:
        delta = chunk.choices[0].delta
        if hasattr(delta,'reasoning_content') and delta.reasoning_content is not None:
            print(delta.reasoning_content, end='', flush=True)
            reasoning_content += delta.reasoning_content
        else:
            if delta.content != "" and is_answering is False:
                is_answering = True
            print(delta.content, end='', flush=True)
            answer_content += delta.content
```

```python
import os
import dashscope
from dashscope import MultiModalConversation

messages = [{
    "role": "user",
    "content": [
        {"image": "https://img.alicdn.com/imgextra/i1/O1CN01gDEY8M1W114Hi3XcN_!!6000000002727-0-tps-1024-406.jpg"},
        {"text": "解答这道题？"}
    ]
}]

response = MultiModalConversation.call(
    api_key=os.getenv('DASHSCOPE_API_KEY'),
    model="qvq-max",
    messages=messages,
    stream=True,
)

for chunk in response:
    message = chunk.output.choices[0].message
    rc = message.get("reasoning_content", None)
    if rc is not None and message.content == []:
        print(message.reasoning_content, end="")
    elif message.content != []:
        print(message.content[0]["text"], end="")
```

### 限制思考长度（thinking_budget）

```python
from openai import OpenAI
import os

client = OpenAI(api_key=os.getenv("DASHSCOPE_API_KEY"), base_url="https://dashscope.aliyuncs.com/compatible-mode/v1")
completion = client.chat.completions.create(
    model="qwen3-vl-plus",
    messages=[{
        "role": "user",
        "content": [
            {"type": "image_url","image_url": {"url": "https://img.alicdn.com/imgextra/i1/O1CN01gDEY8M1W114Hi3XcN_!!6000000002727-0-tps-1024-406.jpg"}},
            {"type": "text","text": "这道题怎么解答？"}
        ]
    }],
    stream=True,
    extra_body={'enable_thinking': True, 'thinking_budget': 81920}
)
for chunk in completion:
    if chunk.choices:
        print(chunk.choices[0].delta)
```

...（完整保留Python/Node.js相关示例、表格与列表；外链按规范加 [来源]）
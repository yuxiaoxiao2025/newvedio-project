---
title: 代码解释器
update: 2025-11-04
source: https://help.aliyun.com/zh/model-studio/qwen-code-interpreter
---

代码解释器在沙箱中运行 Python 代码，解决数学计算、数据分析等复杂问题。通过 `enable_code_interpreter` 开启，需配合思考模式与流式输出。

## 快速开始（DashScope）

```python
import os
import dashscope

messages = [{"role": "user", "content": "123的21次方是多少？"}]

response = dashscope.Generation.call(
    api_key=os.getenv("DASHSCOPE_API_KEY"),
    model="qwen3-max-preview",
    messages=messages,
    enable_code_interpreter=True,
    enable_thinking=True,
    result_format="message",
    stream=True
)

for chunk in response:
    print(chunk["output"])  # tool_info 中可查看运行的代码
```

## 快速开始（OpenAI 兼容）

```python
from openai import OpenAI
import os

client = OpenAI(
    api_key=os.getenv("DASHSCOPE_API_KEY"),
    base_url="https://dashscope.aliyuncs.com/compatible-mode/v1",
)

messages = [{"role": "user", "content": "123的21次方是多少？"}]

completion = client.chat.completions.create(
    model="qwen3-max-preview",
    messages=messages,
    extra_body={"enable_thinking": True, "enable_code_interpreter": True},
    stream=True,
    stream_options={"include_usage": True},
)

reasoning_content = ""
answer_content = ""
is_answering = False
for chunk in completion:
    if not chunk.choices:
        print(chunk.usage)
        continue
    delta = chunk.choices[0].delta
    if hasattr(delta, "reasoning_content") and delta.reasoning_content is not None:
        if not is_answering:
            print(delta.reasoning_content, end="", flush=True)
        reasoning_content += delta.reasoning_content
    if hasattr(delta, "content") and delta.content:
        if not is_answering:
            is_answering = True
        print(delta.content, end="", flush=True)
        answer_content += delta.content
```

```javascript
import OpenAI from "openai";

const openai = new OpenAI({
    apiKey: process.env.DASHSCOPE_API_KEY,
    baseURL: 'https://dashscope.aliyuncs.com/compatible-mode/v1'
});

let reasoningContent = '';
let answerContent = '';
let isAnswering = false;

const stream = await openai.chat.completions.create({
    model: 'qwen3-max-preview',
    messages: [{ role: 'user', content: '123的21次方是多少？' }],
    stream: true,
    enable_thinking: true,
    enable_code_interpreter: true
});

for await (const chunk of stream) {
    if (!chunk.choices?.length) continue;
    const delta = chunk.choices[0].delta;
    if (delta.reasoning_content !== undefined && delta.reasoning_content !== null) {
        if (!isAnswering) process.stdout.write(delta.reasoning_content);
        reasoningContent += delta.reasoning_content;
    }
    if (delta.content) {
        if (!isAnswering) isAnswering = true;
        process.stdout.write(delta.content);
        answerContent += delta.content;
    }
}
```

## 适用范围

- 地域：仅中国大陆（北京）
- 模型：仅 `qwen3-max-preview`（思考模式）

## 注意事项

- 与 Function Calling 互斥，不可同时启用
- 启用代码解释器会增加 Token 消耗；用量在 `usage` 中汇总